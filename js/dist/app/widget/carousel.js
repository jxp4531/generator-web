define(["jquery","transition"],function(e){function n(n,r){this.$element=e(n),this.$indicators=this.$element.find(".carousel-indicators"),this.options=r,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter"+t,e.proxy(this.pause,this)).on("mouseleave"+t,e.proxy(this.cycle,this))}function r(r){return this.each(function(){var i=e(this),s=t.substring(1),o=i.data(s),u=e.extend({},n.DEFAULTS,i.data(),typeof r=="object"&&r),a=typeof r=="string"?r:u.slide;o||i.data(s,o=new n(this,u)),typeof r=="number"?o.to(r):a?o[a]():u.interval&&o.pause().cycle()})}function i(n){var i,s=e(this),o=e(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(!o.hasClass("carousel"))return;var u=e.extend({},o.data(),s.data()),a=s.attr("data-slide-to");a&&(u.interval=!1),r.call(o,u),a&&o.data(t.substring(1)).to(a),n.preventDefault()}function o(e){s&&clearTimeout(s),s=setTimeout(function(){i.call(e.currentTarget,e)},180)}var t=".my.carousel";n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype={getItemIndex:function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},getItemForDirection:function(e,t){var n=this.getItemIndex(t),r=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i=e=="prev"?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},to:function(e){var n=this,r=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one("slid"+t,function(){n.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",this.$items.eq(e))},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(r,i){var s=this.$element.find(".item.active"),o=i||this.getItemForDirection(r,s),u=this.interval,a=r=="next"?"left":"right",f=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:a});this.$element.trigger(c);if(c.isDefaultPrevented())return;this.sliding=!0,u&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var p=e.Event("slid"+t,{relatedTarget:l,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(r),o[0].offsetWidth,s.addClass(a),s[0].offsetWidth,o.addClass(a),s.one("bsTransitionEnd",function(){o.removeClass([r,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(p),f=null},0),o=null,s=null}).emulateTransitionEnd(n.TRANSITION_DURATION)):(s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),u&&this.cycle(),this},destroy:function(){this.$element.off(t),this.$element=null,this.$indicators=null,this.options=null,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null}},e.fn.carousel=r,e.fn.carousel.Constructor=n;var s;return e(document).on("click"+t+".data-api","[data-slide]",i).on("mouseenter"+t+".data-api","[data-slide-to]",o),e('[data-ride="carousel"]').each(function(){var t=e(this);r.call(t,t.data())}),e});