define(["jquery","transition"],function(e){function r(e,t){e.css({"transition-duration":t,"-moz-transition-duration":t,"-webkit-transition-duration":t,"-o-transition-duration":t})}function i(e,t){var n=t==="right"?"100% 0":t==="down"?"50% 0":"0 0";e.css({"transform-origin":n,"-moz-transform-origin":n,"-webkit-transform-origin":n,"-o-transform-origin":n})}function s(t,n){var r=parseInt(n.css("margin-top"),10),i=r>0&&e('<div class="dropdown-gutter" style="height:'+r+'px"></div>');return r>0&&t.append(i)}function o(e){var t=this.$parent,n=t.hasClass("open");n?this.hide(e):this.show(e)}function u(n,u){var a=e(n),f=a.parent(".dropdown"),l=f.find(".dropdown-menu");f.hasClass("fade")&&(r(a.find(".caret"),u.transition/1e3+"s"),r(l,u.transition/1e3+"s"),i(l,u.dir)),this.$elem=a,this.$parent=f,this.opts=u,u.trigger==="hover"?(s(f,l),f.on("mouseenter"+t+".toggle",e.proxy(this.show,this)),f.on("mouseleave"+t+".toggle",e.proxy(this.hide,this))):f.on("click"+t+".toggle",".dropdown-toggle",e.proxy(o,this))}function a(r){if(r&&r.which===3)return;e(n).each(function(){var n=e(this),i=n.data(t.substring(1));if(!i)return;if(r&&r.type=="click"&&i.contains(r.target))return;if(!i.isActive())return;i.hide(r,!0)})}function f(n){return this.each(function(){var r=e(this),i=t.substring(1),s=r.data(i),o=e.extend({},u.DEFAULTS,r.data(),typeof n=="object"&&n);s||r.data(i,s=new u(this,o)),typeof n=="string"&&s[n].call(r)})}var t=".my.dropdown",n="[data-toggle=dropdown]";return u.DEFAULTS={trigger:"click",transition:"200",dir:"left"},u.prototype={show:function(n){var r=this.$elem,i=this.$parent,s=i.hasClass("open"),o=this.opts;if(r.is(".disabled, :disabled"))return;a(n);if(!s){r.trigger(n=e.Event("show"+t));if(n.isDefaultPrevented())return;i.addClass("open").addClass("in");function u(){r.trigger(n=e.Event("shown"+t)),r=null}e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",u).emulateTransitionEnd(o.transition):u()}},hide:function(n,r){function u(){i.removeClass("open"),i=null,s.trigger(e.Event("hidden"+t))}var i=this.$parent,s=this.$elem,o=this.opts;s.trigger(n=e.Event("hide"+t));if(n.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&!r&&i.hasClass("fade")?i.one("bsTransitionEnd",u).emulateTransitionEnd(o.transition):u()},isActive:function(){return this.$parent.hasClass("open")},contains:function(t){return e.contains(this.$parent[0],t)},destroy:function(){this.$parent.off(t),this.$elem.data(t.substring(1),undefined),this.$elem=null,this.$parent=null,this.opts=null}},e.fn.dropdown=f,e.fn.dropdown.Constructor=u,e(n).dropdown(),e(document).on("click"+t+".data-api",a),e});